"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3413],{3905:function(e,r,a){a.d(r,{Zo:function(){return u},kt:function(){return d}});var t=a(7294);function n(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function i(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?i(Object(a),!0).forEach((function(r){n(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function o(e,r){if(null==e)return{};var a,t,n=function(e,r){if(null==e)return{};var a,t,n={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],r.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=t.createContext({}),c=function(e){var r=t.useContext(s),a=r;return e&&(a="function"==typeof e?e(r):l(l({},r),e)),a},u=function(e){var r=c(e.components);return t.createElement(s.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},m=t.forwardRef((function(e,r){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=c(a),d=n,b=m["".concat(s,".").concat(d)]||m[d]||p[d]||i;return a?t.createElement(b,l(l({ref:r},u),{},{components:a})):t.createElement(b,l({ref:r},u))}));function d(e,r){var a=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in r)hasOwnProperty.call(r,s)&&(o[s]=r[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var c=2;c<i;c++)l[c]=a[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},1914:function(e,r,a){a.r(r),a.d(r,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return m}});var t=a(7462),n=a(3366),i=(a(7294),a(3905)),l=["components"],o={marp:!0},s="Pr\xe1ctica 7 (10/11): Assembler",c={unversionedId:"practicas/7",id:"version-2021_2/practicas/7",isDocsHomePage:!1,title:"Pr\xe1ctica 7 (10/11): Assembler",description:"---",source:"@site/versioned_docs/version-2021_2/practicas/7.md",sourceDirName:"practicas",slug:"/practicas/7",permalink:"/teo/docs/2021_2/practicas/7",editUrl:"https://github.com/compiladores/compiladores.github.io/edit/master/docs/versioned_docs/version-2021_2/practicas/7.md",tags:[],version:"2021_2",frontMatter:{marp:!0},sidebar:"version-2021_2/practicaSidebar",previous:{title:"Pr\xe1ctica 6 (3/11): int\xe9rpretes",permalink:"/teo/docs/2021_2/practicas/6"}},u=[{value:"C\xf3digo de m\xe1quina vs assembly vs assembler vs archivos ejecutables",id:"c\xf3digo-de-m\xe1quina-vs-assembly-vs-assembler-vs-archivos-ejecutables",children:[]},{value:"<code>nasm</code> y <code>as</code>",id:"nasm-y-as",children:[]},{value:"ABI",id:"abi",children:[]},{value:"ABI",id:"abi-1",children:[]},{value:"Labels",id:"labels",children:[]},{value:"Nombres de los registros (fuente)",id:"nombres-de-los-registros-fuente",children:[]},{value:"Hoja de ruta para el repo de ejemplos",id:"hoja-de-ruta-para-el-repo-de-ejemplos",children:[]},{value:"Ejercicios",id:"ejercicios",children:[]}],p={toc:u};function m(e){var r=e.components,o=(0,n.Z)(e,l);return(0,i.kt)("wrapper",(0,t.Z)({},p,o,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"pr\xe1ctica-7-1011-assembler"},"Pr\xe1ctica 7 (10/11): Assembler"),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"c\xf3digo-de-m\xe1quina-vs-assembly-vs-assembler-vs-archivos-ejecutables"},"C\xf3digo de m\xe1quina vs assembly vs assembler vs archivos ejecutables"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Assembly"),": ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"familia de lenguajes de programaci\xf3n que son muy parecidos al c\xf3digo de m\xe1quina. "),(0,i.kt)("li",{parentName:"ul"},"Basados en pilas, como ",(0,i.kt)("a",{parentName:"li",href:"https://factorcode.org"},"factor")),(0,i.kt)("li",{parentName:"ul"},"texto"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"C\xf3digo de m\xe1quina"),": Diferencias con assembly: no tiene labels, formato binario"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Archivo ejecutable"),': formato espec\xedfico para cada SO | "burocracia" | contiene c\xf3digo de m\xe1quina'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Assembler"),": convierte assembly a c\xf3digo de m\xe1quina y emite un archivo ejecutable.")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"nasm-y-as"},(0,i.kt)("inlineCode",{parentName:"h2"},"nasm")," y ",(0,i.kt)("inlineCode",{parentName:"h2"},"as")),(0,i.kt)("p",null,"Hay ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/X86_assembly_language#Syntax"},"2 sintaxis de assembly")," (ver link).\nEn linux:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"as")," y ",(0,i.kt)("inlineCode",{parentName:"li"},"gcc")," pertenecen al proyecto GNU y compilan sintaxis AT&T"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"nasm")," usa sintaxis intel")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"abi"},"ABI"),(0,i.kt)("p",null,'Define un "c\xf3digo de conducta" que deben cumplir quien escribe c\xf3digo de m\xe1quina, y el procesador. ',(0,i.kt)("strong",{parentName:"p"},"No")," especifica:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"listado de syscalls"),(0,i.kt)("li",{parentName:"ul"},"listado de registros"),(0,i.kt)("li",{parentName:"ul"},"listado de instrucciones de assembly\nLo que nos interesa de este documento es la figura 3.4 (pag 25) que describe c\xf3mo se deben usar los registros seg\xfan la ABI, aunque resulta m\xe1s util leer c\xf3digo C desensamblado.")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"abi-1"},"ABI"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"regs-usage.png",src:a(2353).Z})),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"labels"},"Labels"),(0,i.kt)("p",null,"Un label marca una posici\xf3n del programa que luego se puede poner en cualquier lugar donde se coloca un entero. El ensamblador reemplaza cada etiqueta por su posici\xf3n relativa donde se escriban. Esto se usa para los jumps y para hacer referencia a datos literales que pueden incluirse en el programa."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"nombres-de-los-registros-fuente"},"Nombres de los registros ",(0,i.kt)("a",{parentName:"h2",href:"https://cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf"},"(fuente)")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"regs.png",src:a(4222).Z})),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"hoja-de-ruta-para-el-repo-de-ejemplos"},"Hoja de ruta para el repo de ejemplos"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Imprimir texto con ",(0,i.kt)("inlineCode",{parentName:"li"},"syscall")),(0,i.kt)("li",{parentName:"ol"},"Imprimir texto con ",(0,i.kt)("inlineCode",{parentName:"li"},"puts")),(0,i.kt)("li",{parentName:"ol"},"Desensamblar y mostrar invocaci\xf3n a ",(0,i.kt)("inlineCode",{parentName:"li"},"printf")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"printf")," en assembler"),(0,i.kt)("li",{parentName:"ol"},"invocar a la subrutina ",(0,i.kt)("inlineCode",{parentName:"li"},"showit")),(0,i.kt)("li",{parentName:"ol"},"Desensamblar y mostrar invocaci\xf3n a ",(0,i.kt)("inlineCode",{parentName:"li"},"scanf")),(0,i.kt)("li",{parentName:"ol"},"combinar ",(0,i.kt)("inlineCode",{parentName:"li"},"scanf")," y ",(0,i.kt)("inlineCode",{parentName:"li"},"printf")),(0,i.kt)("li",{parentName:"ol"},"Usar un ciclo para modificar el flujo del programa")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"ejercicios"},"Ejercicios"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Pedir 3 n\xfameros por stdin e imprimir la suma"),(0,i.kt)("li",{parentName:"ol"},"Pedir un n\xfamero y luego pedir otro, seguir pidiendo otro hasta que el usuario vuelva a introducir el primero"),(0,i.kt)("li",{parentName:"ol"},"Como el primer ejercicio pero diciendole al usuario si el n\xfamero que ingres\xf3 reci\xe9n es mayor o menor que el original")))}m.isMDXComponent=!0},2353:function(e,r,a){r.Z=a.p+"assets/images/regs-usage-5308ed00a21cf29366515d49882e3f78.png"},4222:function(e,r,a){r.Z=a.p+"assets/images/regs-896b30c20b16290b82a87294bd56229d.png"}}]);