<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Trabajo pr谩ctico | Lenguajes y Compiladores</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jisbruzzi.github.io/docs/2021_2/labs/Trabajo Pr谩ctico"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2021_2"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2021_2"><meta data-react-helmet="true" property="og:title" content="Trabajo pr谩ctico | Lenguajes y Compiladores"><meta data-react-helmet="true" name="description" content="El objetivo de este trabajo pr谩ctico es la construcci贸n de un compilador completo."><meta data-react-helmet="true" property="og:description" content="El objetivo de este trabajo pr谩ctico es la construcci贸n de un compilador completo."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jisbruzzi.github.io/docs/2021_2/labs/Trabajo Pr谩ctico"><link data-react-helmet="true" rel="alternate" href="https://jisbruzzi.github.io/docs/2021_2/labs/Trabajo Pr谩ctico" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jisbruzzi.github.io/docs/2021_2/labs/Trabajo Pr谩ctico" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a91fdf40.css">
<link rel="preload" href="/assets/js/runtime~main.b1cd428f.js" as="script">
<link rel="preload" href="/assets/js/main.d06f253e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lenguajes y Compiladores</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/2021_2/labs/intro">Laboratorios</a><a class="navbar__item navbar__link" href="/docs/2021_2/practicas/intro">Pr谩cticas</a><a class="navbar__item navbar__link" href="/docs/2021_2/teoricas/intro">Te贸ricas</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/2021_2/labs/Trabajo Pr谩ctico">2021_2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/labs/intro_teorica">este cuatri</a></li><li><a aria-current="page" class="dropdown__link navbar__link--active" href="/docs/2021_2/labs/Trabajo Pr谩ctico">2021_2</a></li></ul></div><a href="https://github.com/compiladores" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT"></span></div><div class="react-toggle-track-x"><span class="toggle_71bT"></span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/2021_2/labs/Trabajo Pr谩ctico">Trabajo pr谩ctico</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Laboratorio 1</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Laboratorio 2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/2021_2/labs/Laboratorio 3">Laboratorio 3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/2021_2/labs/intro">intro</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Lenguajes y Compiladores <b>2021_2</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/labs/intro_teorica">latest version</a></b> (este cuatri).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 2021_2</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Trabajo pr谩ctico</h1></header><p>El objetivo de este trabajo pr谩ctico es la construcci贸n de un compilador completo.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="alcance"></a>Alcance<a class="hash-link" href="#alcance" title="Direct link to heading">#</a></h2><p>Se debe desarrollar un traductor de <strong>Compischeme 2</strong> a assembly x86 compatible con <code>nasm</code>, acompa帽ado de una suite de tests autom谩ticos. <strong>Compischeme 2</strong> es una versi贸n de Compischeme m谩s amistosa para ser compilada, m谩s similar a C.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="diferencias-entre-compischeme-y-compischeme-2"></a>Diferencias entre Compischeme y Compischeme 2<a class="hash-link" href="#diferencias-entre-compischeme-y-compischeme-2" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="tipos-de-datos-y-cierres"></a>Tipos de datos y cierres<a class="hash-link" href="#tipos-de-datos-y-cierres" title="Direct link to heading">#</a></h4><p>Compischeme s贸lo tiene variables num茅ricas <code>int</code>, <strong>no incluye listas, strings ni funciones como tipo de dato</strong>. Las funciones unicamente se pueden crear adentro de <code>define</code>: no se pueden pasar como par谩metro ni asignar a una variable local. N贸tese que esta es una restricci贸n a煤n m谩s fuerte que la que existe en C, que s铆 permite asignar apuntadores a funciones. Como consecuencia de esto, <strong>no incluye cierres</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="nueva-sintaxis-define"></a>Nueva sintaxis: <code>define</code><a class="hash-link" href="#nueva-sintaxis-define" title="Direct link to heading">#</a></h4><p>Hace una definici贸n global. Compischeme no inclu铆a esta funci贸n, sino unicamente definiciones locales con <code>let</code>. Hay 2 tipos de usos de <code>define</code>: </p><ul><li>Definir variables globales: <strong>Ejemplo:</strong> <code>(define x 5)</code> asigna 5 a <code>x</code></li><li>Definir funciones: <strong>Ejemplo:</strong> <code>( define inc (lambda (x) (+ x 1)) )</code></li></ul><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Todos los usos de <code>lambda</code> que no est茅n dentro de <code>define</code> ser谩n inv谩lidas</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="nueva-sintaxis-display"></a>Nueva sintaxis: <code>display</code><a class="hash-link" href="#nueva-sintaxis-display" title="Direct link to heading">#</a></h4><p><code>display</code> muestra el contenido de una variable por <code>stdout</code>. <strong>Ejemplo:</strong>  <code>(display x)</code> imprime el contenido de <code>x</code> por <code>stdout</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="nueva-sintaxis-print"></a>Nueva sintaxis: <code>print</code><a class="hash-link" href="#nueva-sintaxis-print" title="Direct link to heading">#</a></h4><p><code>print</code> muestra un texto <code>stdout</code>. N贸tese que Compischeme 2 no tiene un tipo de dato <code>string</code>, sino que el texto siempre debe incluirse como literal. <strong>Ejemplo:</strong>  <code>(print &quot;hola&quot;)</code> imprime <code>hola</code> por <code>stdout</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="nueva-sintaxis-read"></a>Nueva sintaxis: <code>read</code><a class="hash-link" href="#nueva-sintaxis-read" title="Direct link to heading">#</a></h4><p><code>read</code> lee un n煤mero de stdin y devuelve su valor. <strong>Ejemplo:</strong> <code>(  display ( + (read) (read) )  )</code></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Se recomienda usar el <a href="https://github.com/compiladores/esqueleto-assembler" target="_blank" rel="noopener noreferrer">repo <code>esqueleto-assembler</code></a> para ver implementaciones posibles de <code>display</code>, <code>print</code> y <code>read</code>.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="parser-y-lexer"></a>Parser y lexer<a class="hash-link" href="#parser-y-lexer" title="Direct link to heading">#</a></h3><p>Hay 2 alternativas para realizar el parser y el lexer:</p><ol><li>Aprovechar el parser y lexer del laboratorio 3, agreg谩ndole la nueva sintaxis <strong>(Se recomienda hacer esto)</strong>.</li><li>Utilizar ANTLR para lexer y parser.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="suite-de-tests"></a>Suite de tests<a class="hash-link" href="#suite-de-tests" title="Direct link to heading">#</a></h3><p>El alcance de este trabajo pr谩ctico incluye pruebas autom谩ticas, cuyo peso en la nota es 5 de 10 puntos. Se deben escribir pruebas al nivel de unit tests y pruebas de integraci贸n. Puede ser una buena idea usar mocks para aislar la clase testeada, junto con inyecci贸n de dependencia. No es necesario usar alg煤n framework para realizar inyecci贸n de dependencia sino que pueden hacerlo &quot;a mano&quot; en los constructores.</p><p>Las pruebas de integraci贸n deben invocar al compilador, enviarle datos al programa compilado por <code>stdin</code> y extraer datos por <code>stdout</code> para ejecutar aserciones. Para los tests de integraci贸n, se recomienda usar python y el <a href="https://docs.python.org/3/library/subprocess.html" target="_blank" rel="noopener noreferrer">m贸dulo subprocess</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="variables"></a>Variables<a class="hash-link" href="#variables" title="Direct link to heading">#</a></h3><p>Las variables se almacenar谩n en la secci贸n <code>data</code>, tal como se hace en la invocaci贸n de la funci贸n de <code>scanf</code> del ejemplo (<a href="https://github.com/compiladores/esqueleto-assembler/blob/9f0118353236c0058bc60accb1c37bd25c4c8645/7.scanf.asm#L16" target="_blank" rel="noopener noreferrer">la l铆nea 16</a> guarda espacio para una variable en el data). En el ejemplo, la funci贸n de <code>glib</code> escribe a <code>fgets_buffer</code>, pero se pueden usar los corchetes para escribir a memoria o leer de memoria usando la instrucci贸n <code>mov</code>, tal como se realiza en la <a href="https://github.com/compiladores/esqueleto-assembler/blob/9f0118353236c0058bc60accb1c37bd25c4c8645/7.scanf.asm#L48" target="_blank" rel="noopener noreferrer">l铆nea 48</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="funciones"></a>Funciones<a class="hash-link" href="#funciones" title="Direct link to heading">#</a></h3><p>Las funciones deben usar las instrucciones <code>call</code> y <code>ret</code>. No es necesario pasar los par谩metros por el stack ni usando la ABI que se describi贸 en la clase de assembler. Ya que cada variable tiene su lugar en la secci贸n data, para pasar argumentos unicamente se deben copiar valores entre direcciones de la secci贸n <code>data</code>. Usar menos espacio en la secci贸n <code>data</code> o el aprovechamiento del stack para pasaje de argumentos se considera una optimizaci贸n.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="resumen"></a>Resumen<a class="hash-link" href="#resumen" title="Direct link to heading">#</a></h2><ul><li>Deber谩n usar ANTLR para parser y lexer, 贸 reutilizar el combo bison + flex</li><li>Deber谩n implementar el TP usando java.</li><li>Deber谩n compilar <strong>Compischeme 2</strong>, una versi贸n modificada del lenguaje del lab 3. Al contrario de compischeme, no van a tener:<ul><li>tipos de datos que no sean n煤meros</li><li>closures (cierres 贸 clausuras)</li><li>nueva sintaxis: <code>(define x 5)</code> define una variable global con el valor 5. Al asignarle un lambda, esto equivale a una definici贸n de funci贸n de C. S贸lo puede haber <code>define</code> en el scope global de los archivos de <strong>Compischeme 2</strong>.</li><li>nueva funci贸n: <code>(display x)</code> muestra el contenido de <code>x</code> por stdout.</li><li>nueva sintaxis: <code>(print &quot;texto&quot;)</code> muestra el texto por stdout (no es una variable string).</li><li>nueva funci贸n: <code>(read)</code> lee un n煤mero de stdin y lo devuelve</li></ul></li><li>Las variables se almacenar谩n en la secci贸n <code>data</code> y no en el stack, tal como en la pr谩ctica de assembly. As铆, cada variable (local o global) tiene su lugar en la secci贸n <code>data</code>.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="criterios-de-evaluaci贸n"></a>Criterios de evaluaci贸n<a class="hash-link" href="#criterios-de-evaluaci贸n" title="Direct link to heading">#</a></h2><ul><li>5 puntos: implementaci贸n. Puntos positivos para la implementaci贸n:<ul><li>implementaci贸n realizada: 2 puntos</li><li>El c贸digo muestra separation of concerns: <ul><li>alguna SoC: 1 punto</li><li>buena SoC: 2 punto</li></ul></li><li>Se utiliza alg煤n tipo de inyecci贸n de dependencia para hacer que las clases sean facilmente testeables: 1 punto</li></ul></li><li>5 puntos: testing. Puntos positivos para la implementaci贸n:<ul><li>presencia de tests de integraci贸n donde se pruebe la ejecuci贸n de archivos compischeme: <ul><li>entre 4 y 7 programas de 10 l铆neas o m谩s: 2 puntos</li><li>8 o m谩s programas de 10 l铆neas o m谩s: 3 puntos</li></ul></li><li>tests que no sean de integraci贸n:<ul><li>se testea 1 clase: 1 punto</li><li>se testean 2 clases o m谩s: 2 puntos</li></ul></li></ul></li></ul></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/compiladores/compiladores.github.io/edit/master/docs/versioned_docs/version-2021_2/labs/Trabajo Pr谩ctico.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/2021_2/labs/Laboratorio 1/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introducci贸n 禄</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#alcance" class="table-of-contents__link">Alcance</a><ul><li><a href="#diferencias-entre-compischeme-y-compischeme-2" class="table-of-contents__link">Diferencias entre Compischeme y Compischeme 2</a></li><li><a href="#parser-y-lexer" class="table-of-contents__link">Parser y lexer</a></li><li><a href="#suite-de-tests" class="table-of-contents__link">Suite de tests</a></li><li><a href="#variables" class="table-of-contents__link">Variables</a></li><li><a href="#funciones" class="table-of-contents__link">Funciones</a></li></ul></li><li><a href="#resumen" class="table-of-contents__link">Resumen</a></li><li><a href="#criterios-de-evaluaci贸n" class="table-of-contents__link">Criterios de evaluaci贸n</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Material</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/labs/intro">Laboratorios</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Hecho para Ud.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b1cd428f.js"></script>
<script src="/assets/js/main.d06f253e.js"></script>
</body>
</html>