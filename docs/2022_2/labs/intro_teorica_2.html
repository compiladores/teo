<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Laboratorio 2: Resumen teórico | Lenguajes y Compiladores</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jisbruzzi.github.io/teo/docs/2022_2/labs/intro_teorica_2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2022_2"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2022_2"><meta data-react-helmet="true" property="og:title" content="Laboratorio 2: Resumen teórico | Lenguajes y Compiladores"><meta data-react-helmet="true" name="description" content="Breve repaso de lexers. Estados especiales del DFA de un lexer. Explicación de"><meta data-react-helmet="true" property="og:description" content="Breve repaso de lexers. Estados especiales del DFA de un lexer. Explicación de"><link data-react-helmet="true" rel="shortcut icon" href="/teo/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jisbruzzi.github.io/teo/docs/2022_2/labs/intro_teorica_2"><link data-react-helmet="true" rel="alternate" href="https://jisbruzzi.github.io/teo/docs/2022_2/labs/intro_teorica_2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jisbruzzi.github.io/teo/docs/2022_2/labs/intro_teorica_2" hreflang="x-default"><link rel="stylesheet" href="/teo/assets/css/styles.e2e4e981.css">
<link rel="preload" href="/teo/assets/js/runtime~main.d9d01d90.js" as="script">
<link rel="preload" href="/teo/assets/js/main.7fd337e9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/teo/"><img src="/teo/img/logo.svg" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/teo/img/logo.svg" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lenguajes y Compiladores</b></a><a class="navbar__item navbar__link navbar__link--active" href="/teo/docs/2022_2/labs/intro">Laboratorios</a><a class="navbar__item navbar__link" href="/teo/docs/2022_2/practicas/intro">Prácticas</a><a class="navbar__item navbar__link" href="/teo/docs/2022_2/teoricas/intro">Teóricas</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/teo/docs/2022_2/labs/intro_teorica">2022_2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/teo/docs/labs/intro">este cuatri</a></li><li><a aria-current="page" class="dropdown__link navbar__link--active" href="/teo/docs/2022_2/labs/intro_teorica_2">2022_2</a></li><li><a class="dropdown__link" href="/teo/docs/2021_2/labs/Trabajo Práctico">2021_2</a></li></ul></div><a href="https://github.com/compiladores" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/intro_teorica">Laboratorio 1: Resumen teórico</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/teo/docs/2022_2/labs/intro_teorica_2">Laboratorio 2: Resumen teórico</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/introduccion_teorica">Laboratorio 3: Resumen teórico</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/lab_cuatro_introduccion_teorica">Laboratorio 4: Resumen teórico</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/1">Laboratorio 1: automatas</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/2">Laboratorio 2: Lexers</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/3">Laboratorio 3: Parser descendiente recursivo de LUA</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/4">Laboratorio 4: Parsers LL1</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/5">Laboratorio 5: Intérprete de JsonLang</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/6">Laboratorio 6: Compilador a JsonAsm</a></li><li class="menu__list-item"><a class="menu__link" href="/teo/docs/2022_2/labs/intro">intro</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Lenguajes y Compiladores <b>2022_2</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/teo/docs/labs/intro">latest version</a></b> (este cuatri).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 2022_2</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Laboratorio 2: Resumen teórico</h1></header><p>Breve repaso de lexers. Estados especiales del DFA de un lexer. Explicación de
un ejemplo de lex/flex.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="bibliografía"></a>Bibliografía<a class="hash-link" href="#bibliografía" title="Direct link to heading">#</a></h2><p>Tiger book: 2.1, 2.2, 2.3
<a href="https://westes.github.io/flex/manual/" target="_blank" rel="noopener noreferrer">Manual de flex</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="qué-es-un-lexer-tiger-21"></a>¿Qué es un lexer? (tiger 2.1)<a class="hash-link" href="#qué-es-un-lexer-tiger-21" title="Direct link to heading">#</a></h2><p>Un lexer convierte una secuencia de caracteres en una secuencia de <strong>tokens</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ejemplo"></a>Ejemplo<a class="hash-link" href="#ejemplo" title="Direct link to heading">#</a></h3><p>Fragmento de código:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">matchO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* find a zero */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">strncmp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Secuencia de tokens que podría extraer el lexer de C:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KEYWORD_FLOAT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;match0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LEFT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KEYWORD_CHAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">STAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;s&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RIGHT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LEFT_BRACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KEYWORD_IF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LEFT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BANG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;strcmp&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LEFT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;s&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">COMMA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;0.0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">COMMA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NUM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RIGHT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RIGHT_PAREN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KEYWORD_RETURN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">REAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;0.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SEMICOLON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RIGHT_BRACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EOF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Notar que:</p><ul><li>El lexer hace desaparecer los comentarios</li><li>El lexer hace desaparecer el espacio en blanco</li><li>El lexer no interpreta <code>char*</code> como un puntero a <code>char</code> sino que unicamente
reconoce <code>(KEYWORD_CHAR), (STAR)</code>. El lexer no extrae información semántica.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cómo-se-describe-un-lexer-tiger-22"></a>¿Cómo se describe un lexer? (tiger 2.2)<a class="hash-link" href="#cómo-se-describe-un-lexer-tiger-22" title="Direct link to heading">#</a></h2><p>Para describir un lexer, lo único que necesitamos es un listado de expresiones
regulares. Las expresiones regulares que están más arriba tienen mayor prioridad
que las que están más abajo en la lista.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ejemplo-1"></a>Ejemplo<a class="hash-link" href="#ejemplo-1" title="Direct link to heading">#</a></h3><p>Algunas de las expresiones regulares que podría haber en el ejemplo anterior:</p><table><thead><tr><th>Expresión regular</th><th>tipo de token</th></tr></thead><tbody><tr><td><code>float</code></td><td><code>KEYWORD_FLOAT</code></td></tr><tr><td><code>(</code></td><td><code>LEFT_PAREN</code></td></tr><tr><td><code>[0-9]+</code></td><td><code>NUM</code></td></tr><tr><td><code>([0-9]+\.[0-9]*)\|([0-9]*\.[0-9]+)</code></td><td><code>REAL</code></td></tr><tr><td><code>[a-z][a-zO-9]*</code></td><td><code>ID</code></td></tr></tbody></table><p>Notar que:</p><ul><li><code>float</code> podría interpretarse como un <code>ID</code>, pero se interpreta como
<code>KEYWORD_FLOAT</code>, debido a su posición en la lista</li><li><code>floated</code> sería un <code>ID</code> y no un <code>KEYWORD_FLOAT</code> con un <code>ed</code> colgando, debido a
que el lexer busca la coincidencia más larga (<em>longest match</em>). <strong>Tener esto
en cuenta es muy importante para resolver los lexers automáticos, ya que
lex/flex respeta el principio del <em>longest match</em></strong></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dfa-derivado-de-un-lexer"></a>DFA derivado de un lexer<a class="hash-link" href="#dfa-derivado-de-un-lexer" title="Direct link to heading">#</a></h2><p>Por medio de algunos algoritmos relativamente simples que no se describen aquí,
es posible convertir cualquier expresión regular en un DFA, y combinar estos DFA
para crear otro DFA &quot;especial&quot;. Este DFA &quot;especial&quot; cumple todas las
formalidades matemáticas de un DFA pero se interpreta de una forma especial para
extraer tokens. Para lenguajes simples es posible intuir el DFA final sin pasar
por los pasos intermedios.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ejemplo-de-deivación-de-un-dfa-para-un-lexer"></a>Ejemplo de deivación de un DFA para un lexer<a class="hash-link" href="#ejemplo-de-deivación-de-un-dfa-para-un-lexer" title="Direct link to heading">#</a></h3><p>Este lenguaje se llama <code>4++</code>. Esta compuesto por 3 tipos de tokens, que pueden
estar separados por guiones bajos.</p><table><thead><tr><th>Expresión regular</th><th>tipo de token</th></tr></thead><tbody><tr><td><code>40</code></td><td><code>CUARENTA</code></td></tr><tr><td><code>4+</code></td><td><code>CUATROS</code></td></tr><tr><td><code>\+\+</code></td><td><code>MAS_MAS</code></td></tr></tbody></table><p>Ejemplos de frases válidas |frase|tokens| |-|-|
|<code>4444++40</code>|<code>(CUATROS,4444),(MAS_MAS,++),(CUARENTA,40)</code>|
|<code>++++4444</code>|<code>(MAS_MAS,++),(MAS_MAS,++),(CUATROS,4444)</code>|
|<code>4__40</code>|<code>(CUATROS,4),(CUARENTA,40)</code>| |<code>404</code>|<code>(CUARENTA,40),(CUATROS,4)</code>|</p><p>Ejemplos de frases inválidas |frase|problema| |-|-| |<code>4+40</code>|el + debe estar
seguido de otro +| |<code>4 40</code>|el espacio es un caracter inválido| |<code>400</code>|se lexea
<code>40</code> pero ningun token empieza con <code>0</code>, el segundo <code>0</code> no se puede consumir|
|<code>hola</code>|ningún token empieza con <code>h</code>| |<code>440</code>|se lexea <code>(CUATROS,44)</code> y luego no
hay cómo consumir el <code>0</code>|</p><p>Autómata de cada expresión regular por separado:</p><p><img alt="separados" src="/teo/assets/images/separados.drawio-cc071dfc38628459bd63ef24663f2614.png"></p><p>Los autómatas derivados de lexers tienen los siguientes estados especiales:</p><ul><li><strong>Estado inicial</strong>: siempre existe como un estado separado</li><li><strong>Estado tokenizable</strong>: en este estado los caracteres consumidos conforman el
token. Son los estados de aceptación de los DFA de arriba</li><li><strong>Estado inválido</strong>: Cuando el DFA llega a este estado, el lexer lanza una
excepción</li><li><strong>Estado muerto</strong>: Explicado a continuación</li></ul><p>Autómatas unidos sin estado muerto:</p><p><img alt="unidos 1" src="/teo/assets/images/unidos_sin_dead.drawio-e654e72ca0f6ca156a93b1cf561b72aa.png"></p><p>Este autómata no sirve para un lexer. Analicemos 2 algoritmos distintos de lexer
para convencernos de esto.</p><ul><li>Optimista: cuando llega a un estado de aceptación, se detiene y emite un
token. Esta implementación no es buena porque para el string <code>444</code> emite
<code>(CUATROS,4),(CUATROS,4),(CUATROS,4)</code></li><li>Pesimista: Cuando llega al estado de aceptación intenta continuar y emite el
token anterior al llegar al estado inválido. Funciona bien para <code>444</code> pero no
para <code>44_40</code> porque, al consumir el caracter <code>_</code>, llega al estado inválido al
igual que lo haría si consumiera una <code>h</code>. No permite diagnosticar errores
correctamente.</li></ul><p>La solución es incluir estados <em>muerto</em>. Los estados de tokens válidos no serán
estados de aceptación sino que lo será este último. El estado muerto señala de
forma unívoca.</p><p>Antes, introducimos una nueva notación para el estado inválido:</p><p><img alt="unidos 2" src="/teo/assets/images/unidos_sin_dead_mini_invalido.drawio-fa828b2aba6f58ee55b0d52e7075a83c.png"></p><p>Autómatas unidos con estado muerto (los estados tokenizables se resaltan pero
<strong>no son especiales matematicamente</strong>):</p><p><img alt="unidos 3" src="/teo/assets/images/unidos_con_dead.drawio-eaa0788682a224ac0283bb3ddeef53e6.png"></p><p>Breve descripción del algoritmo que observa el autómata:</p><ul><li>Iniciar constantemente recorridos del autómata.</li><li>Cada recorrido del autómata consume caracteres hasta alcanzar un estado
inválido o un estado muerto.<ul><li>En el primer caso (estado inválido) emitir un error.</li><li>En el segundo caso (estado muerto), emitir el token correspondiente al
estado tokenizable anterior, si es posible.</li></ul></li><li>Reaprovechar el caracter utilizado para la última transición en el siguiente
recorrido del autómata</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="flex"></a>flex<a class="hash-link" href="#flex" title="Direct link to heading">#</a></h2><p>Flex es un generador de lexers. Utiliza un formato de archivo especial para
generar un lexer escrito en <code>C</code>. Formato de un archivo flex:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">definitions</span></span><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span><span class="token-line" style="color:#393A34"><span class="token plain">rules</span></span><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span><span class="token-line" style="color:#393A34"><span class="token plain">user code</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>En el laboratorio 2 se usa únicamente la sección <code>rules</code>. La sección <code>rules</code> es
una secuencia de expresiones regulares seguidas de algo de código C (siempre
llamadas a <code>printf</code> en el laboratorio 2). Código para el lenguaje cuyo autómata
se estudió previamente:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span><span class="token-line" style="color:#393A34"><span class="token plain">40      { printf(&quot;CUARENTA %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">4+      { printf(&quot;CUATROS %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">\+\+      { printf(&quot;MAS_MAS %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">_       { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">.     { printf(&quot;ERROR&quot;); exit(1); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instrucciones para correr el archivo:</p><ol><li>instalar <code>flex</code> y <code>gcc</code> con <code>apt</code></li><li>Escribir el código de arriba en un archivo <code>ejemplo.lex</code></li><li><code>flex -i -I ejemplo.lex</code></li><li><code>gcc -g lex.yy.c -o ejemplo -ll</code></li><li><code>./ejemplo</code> consume texto por stdin y ejecuta lo correspondiente</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prioridad-entre-reglas"></a>Prioridad entre reglas<a class="hash-link" href="#prioridad-entre-reglas" title="Direct link to heading">#</a></h2><p>Se introduce un nuevo token <code>4[0-9]</code>. Esta regla se escribe arriba de todo,
enconces no se detecta el token <code>CUARENTA</code> ni la instancia <code>44</code> de <code>CUATROS</code>.
<strong>Variando la posición de la nueva regla se cambia la prioridad de la misma para
tokens del mismo largo</strong>. Nótese que aún se detecta <code>444</code> (con <code>4[0-9]</code> arriba
de todo) como una instancia de <code>CUATROS</code>, debido a la prioridad del <strong><em>longest
match</em></strong> por sobre la posición de la regla.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span><span class="token-line" style="color:#393A34"><span class="token plain">4[0-9]      { printf(&quot;CUARENTA_Y_PICO %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">40      { printf(&quot;CUARENTA %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">4+      { printf(&quot;CUATROS %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">\+\+      { printf(&quot;MAS_MAS %s\n&quot;,yytext); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">_       { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">.     { printf(&quot;ERROR&quot;); exit(1); }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">%%</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/compiladores/compiladores.github.io/edit/master/docs/versioned_docs/version-2022_2/labs/2_intro_teorica_2.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/teo/docs/2022_2/labs/intro_teorica"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Laboratorio 1: Resumen teórico</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/teo/docs/2022_2/labs/introduccion_teorica"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Laboratorio 3: Resumen teórico »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bibliografía" class="table-of-contents__link">Bibliografía</a></li><li><a href="#qué-es-un-lexer-tiger-21" class="table-of-contents__link">¿Qué es un lexer? (tiger 2.1)</a><ul><li><a href="#ejemplo" class="table-of-contents__link">Ejemplo</a></li></ul></li><li><a href="#cómo-se-describe-un-lexer-tiger-22" class="table-of-contents__link">¿Cómo se describe un lexer? (tiger 2.2)</a><ul><li><a href="#ejemplo-1" class="table-of-contents__link">Ejemplo</a></li></ul></li><li><a href="#dfa-derivado-de-un-lexer" class="table-of-contents__link">DFA derivado de un lexer</a><ul><li><a href="#ejemplo-de-deivación-de-un-dfa-para-un-lexer" class="table-of-contents__link">Ejemplo de deivación de un DFA para un lexer</a></li></ul></li><li><a href="#flex" class="table-of-contents__link">flex</a></li><li><a href="#prioridad-entre-reglas" class="table-of-contents__link">Prioridad entre reglas</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Material</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/teo/docs/labs/intro">Laboratorios</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Hecho para Ud.</div></div></div></footer></div>
<script src="/teo/assets/js/runtime~main.d9d01d90.js"></script>
<script src="/teo/assets/js/main.7fd337e9.js"></script>
</body>
</html>